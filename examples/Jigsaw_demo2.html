<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="./jigsaw.css"/>
    <title>Jigsaw拼图布局</title>
    <script type="text/javascript" src="../dist/jquery1.7.1.js?v=20121026"></script>
    <script type="text/javascript" src="../dist/jigsaw.js"></script>
    <script type="text/javascript" src="./json.js"></script>
</head>
<body>
<div id="page"></div>
<script>
    ;(function(){
        var backgroundColor =['#ce5f52','#e37063','#6c5d56','#746760','#c8b66a','#dbc877','#6e96b1','#f60','#ccc','#ddd','#05f944','#daf0b9','#608e1e','#71ba09','#ed41f3','#efa7f2','#16d3f5','#36a3b7','#d405f9','#890ba0','#62a450','#f5c316','#cff76f','#aef602','#36f602','#02f6a3','#9ef0d6','#05959a','#b297d6'],
             items=[],
             layData=[lay,lay2,lay3,lay4][Math.floor(Math.random()*4)],
             pitch= 2,
             time;

        var tucao = function(){
            backgroundColor = arrRandom(backgroundColor);
            items && (items=arrRandom(items));
            tagData.confound();
            var jigsawData = jigsaw(layData,
                    {
                        width:$(window).width()+pitch,
                        height:$(window).height()+pitch,
                        callBack:function(v){
                            if(!items[v.count]){
                                items[v.count] = $('<div class="item"></div>').appendTo('#page');
                            }
                            items[v.count].html('<a href="http://news.tag.163.com'+tagData[v.count].url+'" target="_blank">'+(tagData[v.count].doctitle || tagData[v.count].name)+(v.count+1)+'</a>').show().css({'position':'absolute','left':v.left,'top':v.top,'width':v.width-pitch,'height':v.height-pitch,'font-size':v.fontSize,'background':randomColor()});
                        }
                    }
            );
        };
        tucao();
        $(window).resize(function(){
            time && clearTimeout(time);
            time = setTimeout(tucao,200)
        })
    })();


    /**
     * 关于arguments.callee
     */
    var hj = function(){
        //console.log(arguments.callee)
    }
    hj();
    function lll(){
        //console.log(arguments.callee)
    }
    lll();
</script>
</body>
</html>